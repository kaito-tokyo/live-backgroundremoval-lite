# Maintainer: Kaito Udagawa <umireon at kaito dot tokyo>
pkgname=obs-backgroundremoval-lite
pkgver=1.4.3
pkgrel=1
pkgdesc='Background Removal Lite for OBS Studio'
arch=('x86_64')
url="https://github.com/kaito-tokyo/${pkgname}"
license=('GPL2')
depends=('obs-studio' 'fmt' 'ncnn')
makedepends=('git' 'cmake' 'ninja')
conflicts=("${pkgname}-git")
source=("${pkgname}-${pkgver}::git+https://github.com/kaito-tokyo/${pkgname}.git")
sha256sums=('SKIP')

build() {
  cd "${pkgname}-${pkgver}"
  cmake -B build -S . \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib \
    -DENABLE_FRONTEND_API=ON \
    -DENABLE_QT=ON \
    -GNinja
  cmake --build build
}

package() {
  cd "${_pkgname}-${pkgver}"
  DESTDIR="$pkgdir" cmake --install build
}
